{% assign placeholder_image = 'placeholder.jpg' | theme_image_url %}
<div id="js-experts" class="all-experts">
  <div class="all-experts__toggles ui basic buttons">
    <a class="js-liaisons-only ui tiny button">All Liaisons</a>
    <a class="js-experts-only ui tiny button active">All Experts</a>
  </div>

  <a class="all-experts__staff-directory" href="{% path_to staff %}" title="View all our staff">
    <i class="fa fa-fw fa-info-circle"></i>
    Staff Directory
  </a>

  <div class="all-experts__filters">
    <div class="all-experts__filter all-experts__filter--department">
      <div class="ui fluid accordion">
        {% include 'experts-dept-list' with college: 'CALS' %}
        {% include 'experts-dept-list' with college: 'CHE' %}
      </div>
    </div>
  </div>
  <ul class="all-experts__list list">
    {% for person in contents.staff %}
      {% if person.expertise.size > 0 %}{% assign type = 'expert,' %}{% endif %}
      {% if person.departments.size > 0 %}
        {% assign type = type | append: 'liaison' %}
        {% capture depts %}{% for dept in person.departments %}{{ dept.name }},{% endfor %}{% endcapture %}
      {% endif %}

        <li class="all-experts__person" data-type="{{ type }}" data-department="{{ depts }}">
          <img class="all-experts__photo {% unless person.photo.url %}all-experts__photo--placeholder{% endunless %}" src="{{ person.photo.url | resize: '150x150#n' | default: placeholder_image }}">

          <div class="all-experts__contact">
            <a class="all-experts__email" href="https://www.cornell.edu/search/people.cfm?netid={{ person.netid }}" title="Contact details for {{ person.first_name }}" target="_blank">
              <i class="fa fa-fw fa-envelope"></i> {{ person.netid }}
            </a>
            <a href="tel:+1607-25{{ person.phone }}" title="Call {{ person.first_name }}">
              <i class="fa fa-fw fa-phone"></i> 607-25{{ person.phone }}
            </a>
          </div>

          <h3 class="all-experts__name">{{ person.first_name }} {{ person.last_name }}</h3>
          <span class="all-experts__title">{{ person.title }}</span>

          <div class="ui horizontal segments">
            {% if type contains 'expert' %}
              <div class="all-experts__prop-segment ui segment">
                <h6 class="all-experts__prop-heading ui horizontal label">Expertise</h6>

                <ul class="all-experts__prop-list">
                  {% for skill in person.expertise %}
                    <li class="all-experts__prop-item">{{ skill }}</li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}

            {% if type contains 'liaison' %}
              <div class="all-experts__prop-segment ui segment">
                <h6 class="all-experts__prop-heading ui horizontal label">Liaison to</h6>

                <ul class="all-experts__prop-list">
                  {% for dept in person.departments %}
                    <li class="all-experts__prop-item">{{ dept.name }}</li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}
          </div>

          {% if person.libcal_uid.size > 0 %}
            {% include 'staff-book-consultation' with libcal_uid: person.libcal_uid, class: 'all-experts__consult' %}
          {% endif %}
        </li>

        {% comment %} Reset tests {% endcomment %}
        {% assign type = '' %}
        {% assign depts = '' %}
    {% endfor %}
  </ul>
</div>

{{ 'allExperts.bundle.js' | javascript_tag }}

<!--  Libcal MyScheduler Widget-->
{{ '//api3.libcal.com/js/myscheduler.js?002' | javascript_tag }}
